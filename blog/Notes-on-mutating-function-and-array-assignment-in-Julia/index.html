<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
     <link rel="stylesheet" href="/libs/highlight/github.min.css">
   
    <link rel="stylesheet" href="/css/franklin.css">
<link rel="stylesheet" href="/css/tufte.css">
<link rel="stylesheet" href="/css/latex.css">
<link rel="stylesheet" href="/css/adjust.css"> <!-- sheet to overwrite some clashing styles -->
<link rel="icon" href="/assets/favicon.png">

     <title>Mutating function and array assignment in Julia</title>  
</head>

<body>
<div id="layout">
  <div id="menu">
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/tags/">Tags</a></li>
    </ul>
  </div>
  <div id="main">



<!-- Content appended here -->
<div class="franklin-content"><h1 id="mutating_function_and_array_assignment_in_julia"><a href="#mutating_function_and_array_assignment_in_julia" class="header-anchor">Mutating function and array assignment in Julia</a></h1>
<p><strong>Shuvomoy Das Gupta</strong></p>
<p><em>January 18, 2021</em></p>
<p>A mutating function in Julia changes one of its inputs. A common convention is to use <code>&#33;</code> after the name of the function if it is a mutating function. </p>
<p>If we are mutating an array type object, for proper mutation we must change what the array contains, <em>not what the array points to</em>.</p>
<pre><code class="language-julia">function frst_inpt_dbl_of_2nd_inpt&#33;&#40;A::AbstractMatrix&#123;&lt;: Real&#125;, B::AbstractMatrix&#123;&lt;: Real&#125;&#41;
    A .&#61; 2*B # this .&#61; notation ensures that we are changing the content of A
    # ðŸ’€ if we do A &#61; B, then it will only change the reference to the array A
end</code></pre>
<p>Let us test the function above.</p>
<pre><code class="language-julia">B &#61; ones&#40;5,5&#41;
A &#61; similar&#40;A&#41;
frst_inpt_dbl_of_2nd_inpt&#33;&#40;A, B&#41;
A</code></pre>
<p>which indeed gives us the output:</p>
<pre><code class="language-julia">A &#61;
 2.0  2.0  2.0  2.0  2.0
 2.0  2.0  2.0  2.0  2.0
 2.0  2.0  2.0  2.0  2.0
 2.0  2.0  2.0  2.0  2.0
 2.0  2.0  2.0  2.0  2.0</code></pre>
<p>So the contents of <code>A</code> has indeed changed.</p>
<p>Just to experiment, let us experiment with a <em>wrong</em> implementation below.</p>
<pre><code class="language-julia">function wrong_frst_inpt_dbl_of_2nd_inpt_ðŸ’€&#33;&#40;A::AbstractMatrix&#123;&lt;: Real&#125;, B::AbstractMatrix&#123;&lt;: Real&#125;&#41;
    A &#61; 2*B # this will change the references to A, not the values
end</code></pre>
<pre><code class="language-julia">B &#61; ones&#40;5,5&#41;
A &#61; similar&#40;A&#41;
wrong_frst_inpt_dbl_of_2nd_inpt_ðŸ’€&#33;&#40;A, B&#41;
println&#40;A&#41;</code></pre>
<p>which gives us the disastrous output:</p>
<pre><code class="language-julia">A &#61;
3.5e-323  8.4e-323   1.43e-322  2.17e-322  2.8e-322
4.0e-323  9.4e-323   1.73e-322  2.4e-322   2.87e-322
4.4e-323  1.1e-322   1.9e-322   2.5e-322   3.1e-322
7.0e-323  1.14e-322  2.03e-322  2.57e-322  3.16e-322
8.0e-323  1.33e-322  2.08e-322  2.67e-322  3.2e-322</code></pre>
<p>For a more detailed explanation of why this happens, see the blog by John White <a href="http://www.johnmyleswhite.com/notebook/2014/09/06/values-vs-bindings-the-map-is-not-the-territory/">here</a>.</p>
<div class="page-foot">
  <div class="copyright">
    &copy; Shuvomoy Das Gupta. Last modified: May 18, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div><!-- CONTENT ENDS HERE -->
        </div> <!-- end of id=main -->
    </div> <!-- end of id=layout -->
    
    
        <script src="/libs/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script>

    
  </body>
</html>
